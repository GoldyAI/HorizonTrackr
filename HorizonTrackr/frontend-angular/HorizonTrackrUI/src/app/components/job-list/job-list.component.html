<div class="container mt-4">
  <h2 class="text-center mb-3">ğŸ“‹ Job Applications</h2>

  <!-- âœ… Loading Message -->
  <p *ngIf="loading" class="text-center text-primary">Loading jobs...</p>

  <!-- âœ… Job List (Bootstrap Table) -->
  <div *ngIf="!loading && jobs.length > 0">
    <table class="table table-hover table-bordered">
      <thead class="table-dark">
        <tr>
          <th>Company</th>
          <th>Position</th>
          <th>Status</th>
          <th>Date Applied</th>  <!-- âœ… Added Date Column -->
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let job of jobs">
          <td>{{ job.company }}</td>
          <td>{{ job.position }}</td>
          <td>
            <span class="badge" [ngClass]="getStatusClass(job.status)">
              {{ job.status }}
            </span>
          </td>
          <td>{{ formatDate(job.dateApplied) }}</td>  <!-- âœ… Format Date Properly -->
          <td>
            <button class="btn btn-sm btn-warning me-2" (click)="editJob(job)">âœï¸ Edit</button>
            <button class="btn btn-sm btn-danger" (click)="deleteJob(job.id)">ğŸ—‘ Delete</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- âœ… No Jobs Found Message -->
  <p *ngIf="!loading && jobs.length === 0" class="text-center text-muted">
    ğŸš€ No jobs found. Start adding new applications!
  </p>

<!-- âœ… Bootstrap Modal for Editing Jobs -->
<div class="modal fade" id="editModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">âœï¸ Edit Job</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <!-- âœ… Wrap form inside *ngIf="selectedJob" to prevent errors -->
        <form *ngIf="selectedJob" (ngSubmit)="updateJob()">
          <div class="mb-3">
            <label for="company" class="form-label">Company:</label>
            <input type="text" id="company" class="form-control" [(ngModel)]="selectedJob.company" name="company" required>
          </div>

          <div class="mb-3">
            <label for="position" class="form-label">Position:</label>
            <input type="text" id="position" class="form-control" [(ngModel)]="selectedJob.position" name="position" required>
          </div>

          <div class="mb-3">
            <label for="status" class="form-label">Status:</label>
            <select id="status" class="form-select" [(ngModel)]="selectedJob.status" name="status">
              <option value="Applied">Applied</option>
              <option value="Interview">Interview</option>
              <option value="Offer">Offer</option>
              <option value="Rejected">Rejected</option>
            </select>
          </div>

          <div class="mb-3">
            <label for="dateApplied" class="form-label">Date Applied:</label>
            <input type="date" id="dateApplied" class="form-control" [(ngModel)]="selectedJob.dateApplied" name="dateApplied" required>
          </div>

          <button type="submit" class="btn btn-success">ğŸ’¾ Save Changes</button>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">âŒ Close</button>
      </div>
    </div>
  </div>
</div>
